<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GUICHET</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            background-color: #f4f4f4;
            margin: 0;
            padding: 20px;
        }
        header {
            background-color: #4CAF50;
            color: white;
            padding: 10px 0;
            text-align: center;
        }
        h1 {
            margin: 20px 0;
        }
        .container {
            display: flex;
            flex-wrap: wrap;
            justify-content: space-between;
        }
        .section {
            flex: 1 1 45%; /* Flex-grow, flex-shrink, flex-basis */
            background-color: #fff;
            border: 1px solid #ccc;
            border-radius: 5px;
            padding: 10px;
            margin: 10px; /* Ajout d'une marge pour espacer les sections */
        }
        .details {
            display: none;
            margin-top: 10px;
            border: 1px solid #ccc;
            padding: 10px;
            background-color: #fff;
            border-radius: 5px;
        }
        button {
            margin: 5px 0;
            padding: 10px;
            background-color: #4CAF50;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            width: 100%; /* Boutons prennent toute la largeur */
        }
        button:hover {
            background-color: #45a049;
        }

        /* Styles pour les petits écrans */
        @media (max-width: 600px) {
            .section {
                flex: 1 1 100%; /* Sections prennent toute la largeur sur petits écrans */
            }
        }
    </style>
</head>
<body>

<header>
    <h1>GUICHETS</h1>
</header>

<div class="container">
    <div class="section">
        <h2>Les Commandes</h2>
        <button id="showLivraison">Afficher les détails de livraison</button>
        <div id="livraisonDetails" class="details"></div>
    </div>

    <div class="section">
        <h2>Les Réservations</h2>
        <button id="showReservation">Afficher les détails de réservation</button>
        <div id="reservationDetails" class="details"></div>
    </div>
</div>

<script>
    // Récupérer les informations de livraison du stockage local
    const livraisonInfo = JSON.parse(localStorage.getItem('livraisonInfo')) || [];
    const livraisonDetailsDiv = document.getElementById('livraisonDetails');

    function afficherLivraisons() {
        livraisonDetailsDiv.innerHTML = livraisonInfo.map((info, index) => `
            <h3>Adresse de livraison: ${info.adresse}</h3>
            <p>Numéro Whatsapp: ${info.numeroWhatsapp}</p>
            <p>Numéro d'appel: ${info.numeroAppel}</p>
            <p>Heure de livraison: ${info.heureLivraison}</p>
            <h4>Détails de la commande:</h4>
            ${info.details}
            <button onclick="validerLivraison(${index})">Valider</button>
        `).join('');
    }

    afficherLivraisons();

    // Récupérer les informations de réservation du stockage local
    const reservationInfo = JSON.parse(localStorage.getItem('reservationInfo')) || [];
    const reservationDetailsDiv = document.getElementById('reservationDetails');

    function afficherReservations() {
        reservationDetailsDiv.innerHTML = reservationInfo.map((reservation, index) => {
            const details = reservation.productDetails.map(product => `
                <p>Produit: ${product.name}, Code: ${product.code}, Couleur: ${product.color}, Taille: ${product.size}, Quantité: ${product.quantity}</p>
            `).join('');
            return `
                <h2>Nom: ${reservation.nom} ${reservation.prenom}</h2>
                <p>Numéro: ${reservation.numero}</p>
                <h4>Détails de la commande:</h4>
                ${details}
                <button onclick="validerReservation(${index})">Valider</button>
            `;
        }).join('');
    }

    afficherReservations();

    // Gestion des clics sur les boutons
    document.getElementById('showLivraison').addEventListener('click', () => {
        livraisonDetailsDiv.style.display = livraisonDetailsDiv.style.display === 'none' ? 'block' : 'none';
    });

    document.getElementById('showReservation').addEventListener('click', () => {
        reservationDetailsDiv.style.display = reservationDetailsDiv.style.display === 'none' ? 'block' : 'none';
    });

    // Fonctions de validation
    function validerLivraison(index) {
        alert(`Livraison à l'adresse ${livraisonInfo[index].adresse} validée !`);
        livraisonInfo.splice(index, 1); // Supprimer la livraison validée
        localStorage.setItem('livraisonInfo', JSON.stringify(livraisonInfo)); // Mettre à jour le stockage local
        afficherLivraisons(); // Réafficher les livraisons
    }

    function validerReservation(index) {
        alert(`Réservation pour ${reservationInfo[index].nom} ${reservationInfo[index].prenom} validée !`);
        reservationInfo.splice(index, 1); // Supprimer la réservation validée
        localStorage.setItem('reservationInfo', JSON.stringify(reservationInfo)); // Mettre à jour le stockage local
        afficherReservations(); // Réafficher les réservations
    }
</script>

</body>
</html>