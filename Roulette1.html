<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8" />
    <title>Jeu de Roulette</title>
    <style>
        body {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            height: 100vh;
            background-color: #34495e;
            margin: 0;
            font-family: 'Arial', sans-serif;
            color: #fff;
        }

        h1 {
            margin-bottom: 20px;
            font-size: 36px;
        }

        #roulette-container {
            position: relative;
            width: 80vw; /* Utilisation de la largeur de la vue */
            height: 80vw; /* Utilisation de la largeur de la vue pour garder le ratio */
            max-width: 400px; /* Limite la largeur maximale */
            max-height: 400px; /* Limite la hauteur maximale */
            margin-bottom: 20px;
        }

        #roulette {
            width: 100%;
            height: 100%;
            border-radius: 50%;
            border: 10px solid #ecf0f1;
            box-shadow: 0 0 20px rgba(0,0,0,0.5);
        }

        #result {
            font-size: 24px;
            margin-top: 20px;
        }

        #chosenNumbers {
            margin-top: 10px;
            padding: 10px;
            background-color: #2c3e50;
            border-radius: 5px;
            color: #fff;
            width: 100%;
            text-align: center;
        }

        #message {
            margin-top: 20px;
            font-size: 20px;
        }

        #hearts {
            font-size: 24px;
        }

        /* Styles pour la fen√™tre modale */
        #modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 80vw; /* Ajustez la largeur √† 80% de la largeur de la vue */
    height: 80vh; /* Ajustez la hauteur √† 80% de la hauteur de la vue */
            background-color: rgba(0, 0, 0, 0.7);
            justify-content: center;
            align-items: center;
        }

        #modal-content {
    background-color: #fff;
    padding: 20px;
    border-radius: 5px;
    text-align: center;
    max-width: 90%; /* Limite la largeur maximale du contenu */
    max-height: 90%; /* Limite la hauteur maximale du contenu */
    overflow-y: auto; /* Ajoute un d√©filement si le contenu d√©passe la hauteur */
}

        .button {
            margin: 5px;
            padding: 10px 15px;
            font-size: 18px;
            cursor: pointer;
        }

        /* Styles g√©n√©raux */
body {
    padding: 10px; /* Ajout d'un peu de padding pour les petits √©crans */
}

/* Styles pour le conteneur de la roulette */
#roulette-container {
    width: 150vw; /* Utilisation de la largeur de la vue */
    height: 150vw; /* Utilisation de la largeur de la vue pour garder le ratio */
    max-width: 500px; /* Limite la largeur maximale */
    max-height: 500px; /* Limite la hauteur maximale */
}

/* Styles pour les boutons de s√©lection de chiffres */
.number-button {
    margin: 5px;
    padding: 10px;
    font-size: 16px; /* Taille de police plus petite pour les petits √©crans */
}

/* Styles pour le conteneur de la roulette */
#roulette-container {
    width: 150vw; /* Utilisation de la largeur de la vue */
    height: 150vw; /* Utilisation de la largeur de la vue pour garder le ratio */
    max-width: 500px; /* Augmenter la largeur maximale */
    max-height: 500px; /* Augmenter la hauteur maximale */
}

/* Styles pour les boutons de s√©lection de chiffres */
.number-button {
    margin: 15px;
    padding: 25px; /* Augmenter le padding pour les boutons */
    font-size: 50px; /* Augmenter la taille de police pour les petits √©crans */
}

@media (max-width: 768px) {
    h1 {
        font-size: 60px; /* Augmentation de la taille de la police pour les petits √©crans */
    }

    #result {
        font-size: 60px; /* Augmentation de la taille de la police pour le r√©sultat */
    }

    #chosenNumbers {
        font-size: 60px; /* Augmentation de la taille de la police pour les chiffres choisis */
    }

    #message {
        font-size: 60px; /* Augmentation de la taille de la police pour le message */
    }

    #hearts {
        font-size: 30px; /* Augmentation de la taille de la police pour les c≈ìurs */
    }

    #roulette-container {
        width: 200vw; /* Augmentation de la largeur de la roulette */
        height: 200vw; /* Augmentation de la hauteur de la roulette */
    }

    .number-button {
        font-size: 100px; /* Augmentation de la taille de police pour les boutons */
        padding: 50px; /* Augmentation du padding pour les boutons */
    }
}

@media (max-width: 480px) {
    h1 {
        font-size: 100px; /* Augmentation suppl√©mentaire pour les tr√®s petits √©crans */
    }

    .number-button {
        font-size: 1000px; /* Taille de police encore plus grande pour les tr√®s petits √©crans */
        padding: 30px; /* Augmentation du padding */
    }
}
    </style>
</head>
<body>

<h1>Jeu de Roulette</h1>

<div id="roulette-container">
    <canvas id="roulette" width="400" height="400"></canvas>
</div>

<div id="numberSelection">
    <h2>Choisissez un chiffre :</h2>
    <div id="numbers"></div>
</div>

<div id="result"></div>

<div id="chosenNumbers">Chiffre choisi : <span id="chosenList"></span></div>

<div id="message"></div>
<div id="hearts"></div>

<audio id="gameMusic" src="11 sex.mp3" preload="auto"></audio> <!-- Assurez-vous que le chemin est correct -->

<!-- Fen√™tre modale -->
<div id="modal">
    <div id="modal-content">
        <p>OOOupsss!!! Vous avez perdu. üò¢ Voulez-vous rejouer?</p>
        <button class="button" id="yesButton">Rejouer</button>
        <button class="button" id="noButton">Non</button>
    </div>
</div>

<script>
const canvas = document.getElementById('roulette');
const ctx = canvas.getContext('2d');
const segments = Array.from({ length: 21 }, (_, i) => ({ color: `hsl(${i * 17.5}, 100%, 50%)`, label: i.toString() }));
const numSegments = segments.length;
let isSpinning = false;
let userChoice = null;
let currentWinningIndex = 0;
let consecutiveWins = 0;

const resultDiv = document.getElementById('result');
const chosenList = document.getElementById('chosenList');
const messageDiv = document.getElementById('message');
const heartsDiv = document.getElementById('hearts');
const gameMusic = document.getElementById('gameMusic');
const modal = document.getElementById('modal');
const yesButton = document.getElementById('yesButton');
const noButton = document.getElementById('noButton');

const winningNumbers = Array.from({ length: 5 }, () => Math.floor(Math.random() * 21));

function drawRoulette() {
    const centerX = canvas.width / 2;
    const centerY = canvas.height / 2;
    const radius = Math.min(centerX, centerY) - 20; // Ajustement du rayon
    ctx.clearRect(0, 0, canvas.width, canvas.height);

    const arcSize = (2 * Math.PI) / numSegments;

    for (let i = 0; i < numSegments; i++) {
        const start = i * arcSize;
        ctx.beginPath();
        ctx.moveTo(centerX, centerY);
        ctx.arc(centerX, centerY, radius, start, start + arcSize);
        ctx.closePath();
        ctx.fillStyle = segments[i].color;
        ctx.fill();

        ctx.save();
        ctx.translate(centerX, centerY);
        ctx.rotate(start + arcSize / 2);
        ctx.textAlign = "right";
        ctx.fillStyle = "#fff";
        ctx.font = "bold 20px Arial";
        ctx.fillText(segments[i].label, radius - 10, 10);
        ctx.restore();
    }
}

function drawBall(position) {
    const ballRadius = 10;
    const angle = (position * (2 * Math.PI)) / numSegments;
    const ballX = canvas.width / 2 + (130 * Math.cos(angle));
    const ballY = canvas.height / 2 + (130 * Math.sin(angle));

    ctx.fillStyle = "blue";
    ctx.beginPath();
    ctx.arc(ballX, ballY, ballRadius, 0, Math.PI * 2);
    ctx.fill();
}

function spinBall() {
    if (isSpinning) return;
    if (userChoice === null) {
        alert("Veuillez choisir un chiffre avant de commencer !");
        return;
    }
    isSpinning = true;
    resultDiv.textContent = '';

    const randomSpins = Math.floor(Math.random() * 4) + 3;
    const winningSegmentIndex = Math.floor(Math.random() * numSegments);
    const targetPosition = winningSegmentIndex;

    const duration = 4000;
    const startTime = performance.now();

    function animate(currentTime) {
        const elapsed = currentTime - startTime;
        const progress = Math.min(elapsed / duration, 1);
        const easeProgress = 1 - Math.pow(1 - progress, 3);

        const currentPosition = (easeProgress * (targetPosition + randomSpins * numSegments)) % numSegments;

        drawRoulette();
        drawBall(currentPosition);

        if (progress < 1) {
            requestAnimationFrame(animate);
        } else {
            const winningSegment = segments[winningSegmentIndex];

            resultDiv.textContent = `Le chiffre gagnant est : ${winningSegment.label}`;
            if (userChoice === winningSegment.label) {
                resultDiv.textContent += ` (Vous avez choisi ce chiffre !)`;
                consecutiveWins++;
                updateMessage();
            } else {
                resultDiv.textContent += ` (Vous n'avez pas choisi ce chiffre.)`;
                consecutiveWins = 0; // R√©initialiser les victoires cons√©cutives
                showModal(); // Afficher la fen√™tre modale si le joueur a perdu
            }

            currentWinningIndex++;
            isSpinning = false;
        }
    }

    requestAnimationFrame(animate);
}

function updateMessage() {
    if (consecutiveWins > 0) {
        messageDiv.textContent = "Gagnez trois fois cons√©cutivement et obtenez un coupon gratuit !";
        heartsDiv.textContent = "‚ù§Ô∏è".repeat(consecutiveWins); // Affiche les c≈ìurs
    } else {
        messageDiv.textContent = "";
        heartsDiv.textContent = "";
    }
}

function showModal() {
    modal.style.display = 'flex';
}

function hideModal() {
    modal.style.display = 'none';
}

yesButton.addEventListener('click', () => {
    hideModal();
    openpopunder(); // Appel de la fonction pour afficher l'annonce
    // Simuler un d√©lai pour l'annonce
    setTimeout(() => {
        userChoice = null; // R√©initialiser le choix de l'utilisateur
        drawRoulette(); // Red√©marrer le jeu
        spinBall(); // D√©marre le jeu imm√©diatement apr√®s le choix
    }, 2000); // D√©lai de 2 secondes avant de red√©marrer le jeu
});

noButton.addEventListener('click', () => {
    hideModal();
    window.history.back(); // Rediriger vers la page pr√©c√©dente
});

const numbersDiv = document.getElementById('numbers');
for (let i = 0; i <= 20; i++) {
    const button = document.createElement('button');
    button.textContent = i;
    button.className = 'number-button';
    button.addEventListener('click', () => {
        userChoice = i.toString();
        alert(`Vous avez choisi le chiffre : ${i}`);
        chosenList.textContent = userChoice;
        drawRoulette();
        spinBall(); // D√©marre le jeu imm√©diatement apr√®s le choix
    });
    numbersDiv.appendChild(button);
}

// D√©marrer le jeu automatiquement
drawRoulette();

// D√©marrer la musique automatiquement
gameMusic.play().catch(error => {
    console.log("La musique ne peut pas √™tre jou√©e automatiquement : ", error);
});

// Script pour le popunder
function openpopunder() {
    window.open('https://example.com', '_blank'); // Remplacez par l'URL de votre annonce
}

// Script du popunder dans le footer
const footerScript = document.createElement('script');
footerScript.type = 'text/javascript';
footerScript.src = '//pl27153805.profitableratecpm.com/97/42/41/974241c4ce1a89677813bd35b4ed3868.js';
document.body.appendChild(footerScript);
</script>

</body>
</html>